<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Valemtimes</title>

  <style>
    :root { --pink: #ff3b7a; }

    body{
      margin:0;height:100vh;display:grid;place-items:center;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      overflow:hidden;background:#000;
    }

    /* Repeating GIF background */
    .bg{
      position:fixed;inset:0;
      background:url("./bg.gif") repeat;
      background-size:220px;
      z-index:-3;
    }

    /* DARK â†’ LIGHT overlay */
    .darkness{
      position:fixed;inset:0;
      background:#000;
      opacity:0.85;
      transition:opacity 0.8s ease;
      z-index:-2;
    }

    .bg-overlay{
      position:fixed;inset:0;
      background:rgba(255,240,248,.55);
      backdrop-filter:blur(2px);
      z-index:-1;
    }

    .card{
      text-align:center;
      background:rgba(255,255,255,.92);
      padding:30px 24px;border-radius:18px;
      box-shadow:0 10px 30px rgba(0,0,0,.25);
      max-width:520px;margin:16px;
    }

    h1{margin:0 0 12px;font-size:32px;}
    p{margin:0 0 18px;font-size:17px;}

    .btns{display:flex;gap:14px;justify-content:center;flex-wrap:wrap;}
    button{
      font-size:18px;padding:12px 18px;border:0;border-radius:999px;
      cursor:pointer;transition:transform .12s ease;
    }
    button:active{transform:scale(.98);}

    #yes{background:var(--pink);color:#fff;}
    #no{
      background:#111827;color:#fff;
      position:fixed;left:50%;top:55%;
      transform:translate(-50%,-50%);
    }

    #msg{margin-top:16px;font-size:20px;font-weight:700;color:var(--pink);}

    /* Modal */
    .modal{position:fixed;inset:0;display:none;place-items:center;background:rgba(0,0,0,.6);}
    .modal.show{display:grid;}

    .modal-card{
      background:#fff;border-radius:16px;width:min(92vw,720px);
      box-shadow:0 20px 60px rgba(0,0,0,.35);text-align:center;padding-bottom:14px;
    }

    .stage{position:relative;width:min(72vw,420px);height:min(60vh,420px);display:grid;place-items:center;margin:auto;}

    .box-wrap{position:relative;width:190px;height:150px;}

    .box{
      position:absolute;left:0;right:0;bottom:0;margin:auto;
      width:190px;height:120px;border-radius:14px;background:#ff3b7a;
    }

    .lid{
      position:absolute;left:0;right:0;top:0;margin:auto;
      width:200px;height:54px;border-radius:14px;background:#ff9fc4;
      transform-origin:50% 100%;
    }

    .surprise{
      position:absolute;width:min(60vw,360px);border-radius:16px;
      transform:translateY(80px) scale(.3);opacity:0;
      box-shadow:0 20px 60px rgba(0,0,0,.35);
    }

    .open .lid{animation:lidOpen .7s forwards;}
    .open .surprise{animation:popOut .9s forwards;}

    @keyframes lidOpen{
      to{transform:translateY(-10px) rotateX(70deg);}
    }
    @keyframes popOut{
      60%{opacity:1;transform:translateY(-110px) scale(1.1);}
      100%{opacity:1;transform:translateY(-100px) scale(1);}
    }

    .close{margin:12px;padding:10px 16px;border-radius:999px;background:#111827;color:#fff;border:0;}
  </style>
</head>

<body>
  <div class="bg"></div>
  <div class="darkness" id="darkness"></div>
  <div class="bg-overlay"></div>

  <div class="card">
    <h1>My dear Ashima Singh ðŸ’–</h1>
    <p>Will you be my Valemtimes?</p>

    <div class="btns">
      <button id="yes">Yes</button>
      <button id="no">No</button>
    </div>

    <div id="msg"></div>
  </div>

  <div class="modal" id="modal">
    <div class="modal-card">
      <div class="stage">
        <div class="box-wrap" id="boxWrap">
          <div class="lid"></div>
          <div class="box"></div>
          <img class="surprise" src="./yes.jpg" />
        </div>
      </div>
      <button class="close" id="closeModal">Close</button>
    </div>
  </div>

  <!-- MUSIC FILE -->
  <audio id="music" src="./music.mp3"></audio>

  <script>
    const noBtn = document.getElementById("no");
    const yesBtn = document.getElementById("yes");
    const modal = document.getElementById("modal");
    const music = document.getElementById("music");
    const boxWrap = document.getElementById("boxWrap");
    const darkness = document.getElementById("darkness");

    let lightLevel = 0.85;

    function brightenBackground(){
      lightLevel -= 0.12;
      if(lightLevel < 0) lightLevel = 0;
      darkness.style.opacity = lightLevel;
    }

    function moveNoButton(){
      const x = Math.random() * (window.innerWidth - 100);
      const y = Math.random() * (window.innerHeight - 50);
      noBtn.style.left = x + "px";
      noBtn.style.top = y + "px";
      brightenBackground();
    }

    noBtn.addEventListener("mouseenter", moveNoButton);
    noBtn.addEventListener("mousemove", moveNoButton);
    noBtn.addEventListener("click", e => {
      e.preventDefault();
      moveNoButton();
    });

    yesBtn.addEventListener("click", async () => {
      modal.classList.add("show");
      noBtn.style.display = "none";
      yesBtn.style.display = "none";

      try { await music.play(); } catch {}

      setTimeout(()=> boxWrap.classList.add("open"), 300);
    });

    document.getElementById("closeModal").onclick = () => modal.classList.remove("show");
  </script>
</body>
</html>
